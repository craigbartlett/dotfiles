#!/bin/zsh

cd `dirname $0`


OLD_CONFIG="$(md5sum $0)"
git pull origin master
NEW_CONFIG="$(md5sum $0)"

if [ ! $OLD_CONFIG = $NEW_CONFIG ]; then
    echo "The $0 file has been updated. Please run the script again."
    cd $OLDPWD
    return 0
fi

rsync --exclude ".git" \
      --exclude "configure" \
      --exclude "README.md" \
      --exclude "LICENSE" \
      -av . ~

source ~/.zshrc

cd $OLDPWD
